{"remainingRequest":"/home/diih/Desktop/dev/portfolio/brascoffee-frontend/node_modules/babel-loader/lib/index.js!/home/diih/Desktop/dev/portfolio/brascoffee-frontend/node_modules/eslint-loader/index.js??ref--13-0!/home/diih/Desktop/dev/portfolio/brascoffee-frontend/src/repositories/repository.js","dependencies":[{"path":"/home/diih/Desktop/dev/portfolio/brascoffee-frontend/src/repositories/repository.js","mtime":1601580007109},{"path":"/home/diih/Desktop/dev/portfolio/brascoffee-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/diih/Desktop/dev/portfolio/brascoffee-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/diih/Desktop/dev/portfolio/brascoffee-frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nimport { auth } from '@/services/authService';\nimport Vue from 'vue';\nvar errorKey = 'description';\nvar instance = axios.create({\n  baseURL: process.env.VUE_APP_API + '/'\n});\ninstance.interceptors.request.use(function (config) {\n  var token = auth.getToken();\n\n  if (token) {\n    config.headers['Authorization'] = \"Bearer \".concat(token);\n  }\n\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\ninstance.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  if (error.config.hasOwnProperty('errorHandle') && error.config.errorHandle === false) {\n    return Promise.reject(error);\n  }\n\n  var failedResponse = error.response;\n\n  if (failedResponse.status === 403) {\n    auth.logout();\n    return Promise.resolve(error);\n  } else {\n    return Promise.resolve(error);\n  }\n});\nexport default instance;",{"version":3,"sources":["/home/diih/Desktop/dev/portfolio/brascoffee-frontend/src/repositories/repository.js"],"names":["axios","auth","Vue","errorKey","instance","create","baseURL","process","env","VUE_APP_API","interceptors","request","use","config","token","getToken","headers","error","Promise","reject","response","hasOwnProperty","errorHandle","failedResponse","status","logout","resolve"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,wBAArB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AAEA,IAAMC,QAAQ,GAAG,aAAjB;AAEA,IAAMC,QAAQ,GAAGJ,KAAK,CAACK,MAAN,CAAa;AAC5BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,WAAZ,GAA0B;AADP,CAAb,CAAjB;AAIAL,QAAQ,CAACM,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CACE,UAACC,MAAD,EAAY;AACV,MAAIC,KAAK,GAAGb,IAAI,CAACc,QAAL,EAAZ;;AAEA,MAAID,KAAJ,EAAW;AACTD,IAAAA,MAAM,CAACG,OAAP,CAAe,eAAf,qBAA4CF,KAA5C;AACD;;AAED,SAAOD,MAAP;AACD,CATH,EAUE,UAACI,KAAD,EAAW;AACT,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAZH;AAeAb,QAAQ,CAACM,YAAT,CAAsBU,QAAtB,CAA+BR,GAA/B,CAAmC,UAACQ,QAAD,EAAc;AAC/C,SAAOA,QAAP;AACD,CAFD,EAEG,UAACH,KAAD,EAAW;AAEZ,MAAGA,KAAK,CAACJ,MAAN,CAAaQ,cAAb,CAA4B,aAA5B,KAA8CJ,KAAK,CAACJ,MAAN,CAAaS,WAAb,KAA6B,KAA9E,EAAoF;AAClF,WAAOJ,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD;;AAED,MAAIM,cAAc,GAAGN,KAAK,CAACG,QAA3B;;AACA,MAAIG,cAAc,CAACC,MAAf,KAA0B,GAA9B,EAAmC;AACjCvB,IAAAA,IAAI,CAACwB,MAAL;AACA,WAAOP,OAAO,CAACQ,OAAR,CAAgBT,KAAhB,CAAP;AACD,GAHD,MAIK;AACH,WAAOC,OAAO,CAACQ,OAAR,CAAgBT,KAAhB,CAAP;AACD;AACF,CAhBD;AAkBA,eAAeb,QAAf","sourcesContent":["import axios from 'axios'\nimport { auth } from '@/services/authService'\nimport Vue from 'vue'\n\nconst errorKey = 'description'\n\nconst instance = axios.create({\n  baseURL: process.env.VUE_APP_API + '/'\n})\n\ninstance.interceptors.request.use(\n  (config) => {\n    let token = auth.getToken();\n    \n    if (token) {\n      config.headers['Authorization'] = `Bearer ${token}`;\n    }\n\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n)\n\ninstance.interceptors.response.use((response) => {\n  return response;\n}, (error) => {\n  \n  if(error.config.hasOwnProperty('errorHandle') && error.config.errorHandle === false){\n    return Promise.reject(error)\n  }\n  \n  let failedResponse = error.response\n  if (failedResponse.status === 403) {\n    auth.logout();\n    return Promise.resolve(error);\n  }\n  else {\n    return Promise.resolve(error);\n  }\n})\n\nexport default instance\n\n"]}]}