{"remainingRequest":"/home/diih/Desktop/dev/portfolio/brascoffee-frontend/node_modules/babel-loader/lib/index.js!/home/diih/Desktop/dev/portfolio/brascoffee-frontend/node_modules/eslint-loader/index.js??ref--13-0!/home/diih/Desktop/dev/portfolio/brascoffee-frontend/src/repositories/repository.js","dependencies":[{"path":"/home/diih/Desktop/dev/portfolio/brascoffee-frontend/src/repositories/repository.js","mtime":1600801222976},{"path":"/home/diih/Desktop/dev/portfolio/brascoffee-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/diih/Desktop/dev/portfolio/brascoffee-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/diih/Desktop/dev/portfolio/brascoffee-frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nimport { auth } from '@/services/authService';\nvar errorKey = 'description';\nvar instance = axios.create({\n  baseURL: process.env.VUE_APP_API + '/'\n});\ninstance.interceptors.request.use(function (config) {\n  var token = auth.getToken();\n\n  if (token) {\n    config.headers['Authorization'] = \"Bearer \".concat(token);\n  }\n\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\ninstance.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  var failedResponse = error.response;\n\n  if (failedResponse.status === 403) {\n    console.log(failedResponse);\n    auth.logout();\n    return Promise.resolve(error);\n  } else {\n    //console.log(failedResponse.data[errorKey])\n    return Promise.resolve(error);\n  }\n});\nexport default instance;",{"version":3,"sources":["/home/diih/Desktop/dev/portfolio/brascoffee-frontend/src/repositories/repository.js"],"names":["axios","auth","errorKey","instance","create","baseURL","process","env","VUE_APP_API","interceptors","request","use","config","token","getToken","headers","error","Promise","reject","response","failedResponse","status","console","log","logout","resolve"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,wBAArB;AAEA,IAAMC,QAAQ,GAAG,aAAjB;AAEA,IAAMC,QAAQ,GAAGH,KAAK,CAACI,MAAN,CAAa;AAC5BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,WAAZ,GAA0B;AADP,CAAb,CAAjB;AAIAL,QAAQ,CAACM,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CACE,UAACC,MAAD,EAAY;AACV,MAAIC,KAAK,GAAGZ,IAAI,CAACa,QAAL,EAAZ;;AACA,MAAID,KAAJ,EAAW;AACTD,IAAAA,MAAM,CAACG,OAAP,CAAe,eAAf,qBAA4CF,KAA5C;AACD;;AAED,SAAOD,MAAP;AACD,CARH,EASE,UAACI,KAAD,EAAW;AACT,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAXH;AAcAb,QAAQ,CAACM,YAAT,CAAsBU,QAAtB,CAA+BR,GAA/B,CAAmC,UAACQ,QAAD,EAAc;AAC/C,SAAOA,QAAP;AACD,CAFD,EAEG,UAACH,KAAD,EAAW;AACZ,MAAII,cAAc,GAAGJ,KAAK,CAACG,QAA3B;;AAEA,MAAIC,cAAc,CAACC,MAAf,KAA0B,GAA9B,EAAmC;AACjCC,IAAAA,OAAO,CAACC,GAAR,CAAYH,cAAZ;AACAnB,IAAAA,IAAI,CAACuB,MAAL;AACA,WAAOP,OAAO,CAACQ,OAAR,CAAgBT,KAAhB,CAAP;AACD,GAJD,MAKK;AACH;AACA,WAAOC,OAAO,CAACQ,OAAR,CAAgBT,KAAhB,CAAP;AACD;AACF,CAdD;AAgBA,eAAeb,QAAf","sourcesContent":["import axios from 'axios'\nimport { auth } from '@/services/authService'\n\nconst errorKey = 'description'\n\nconst instance = axios.create({\n  baseURL: process.env.VUE_APP_API + '/'\n})\n\ninstance.interceptors.request.use(\n  (config) => {\n    let token = auth.getToken();\n    if (token) {\n      config.headers['Authorization'] = `Bearer ${token}`;\n    }\n\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n)\n\ninstance.interceptors.response.use((response) => {\n  return response;\n}, (error) => {\n  let failedResponse = error.response\n\n  if (failedResponse.status === 403) {\n    console.log(failedResponse)\n    auth.logout();\n    return Promise.resolve(error);\n  }\n  else {\n    //console.log(failedResponse.data[errorKey])\n    return Promise.resolve(error);\n  }\n})\n\nexport default instance\n\n"]}]}